<!DOCTYPE html>
<html>
    <head>
        <title>TurboPutative</title>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
        <link href="assets/css/main.css" type="text/css" rel="stylesheet">
        <link href="../assets/css/main.css" type="text/css" rel="stylesheet">

        <style>
            .waitContainer {
                margin-top: 10px;
                display: grid;
                grid-template-rows: auto auto auto;
                grid-row-gap: 10px;
                padding: 0 30px 30px 20px;
                
                background-color: white;
            }

            #mainMessage {
                text-align: center;
            }

            #tableData {
                border-collapse: collapse;
                margin-left: 25%;
                width: 50%;
            }

            #tableData td {
                border: 1px solid #ddd;
                padding: 8px;
                text-align: center;
            }

            #tableData tr:nth-child(odd){
                background-color: #f2f2f2;
            }

            .field {
                width: 50%;
                font-weight: bold;
            }

            .data {
                width: 50%;
            }

            #updateMessage {
                text-align: center;
                font-size: 1em;
            }

            #containerDownload {
                background-color: white;
                padding: 5px 0 50px 0;
                text-align: center;
            }

            #containerDownload a {
                margin: auto;
                width: 170px;
                height: 50px;
                padding: 14px 0;
                display: block;
                border-radius: 4px;
                text-decoration: none;
                font-size: 1.2em;
                color: white;
                background-color: #4CAF50;
                }

                #containerDownload a:hover {
                    background-color: #204922;
                }

        </style>
    </head>

    <body>
        <!-- Header-->
        <div class="header">
            <h1>TurboPutative</h1>
        </div>

        <!-- Navigation bar -->
        <div class="nav">
            <a href="../index.html">Home</a>
            <a href="">Modules</a>
            <a href="">Settings</a>
            <a href="../turboputative.html">TurboPutative</a>
            <a href="https://github.com/CNIC-Proteomics/MetabolomicsWorkflow" target="_blank">GitHub</a>
        </div>

        <div class="waitContainer">
            <div id="mainMessage">
                <h3>Your request is being processed</h3>
            </div>
            <div class="tableDataContainer">
                <table id="tableData">
                    <tr>
                        <td class="field">Request ID</td>
                        <td class="data" id="jobID"></td>
                    </tr>
                    <tr>
                        <td class="field">Status</td>
                        <td class="data" id="jobStatus"></td>
                    </tr>
                    <tr>
                        <td class="field">Time since submission</td>
                        <td class="data" id="jobTime">00:00:00</td>
                    </tr>
                </table>
            </div>
            <div id="updateMessage">
                <p>This page will be automatically updated in 5 seconds until processing is done</p>
            </div>
        </div>

        <!-- Hidden Download link -->
        <div id="containerDownload" style="display: none;">
            
                <a  href="###INSERT_ZIP_PATH###" download="TurboPutative.zip">
                    Download results
                </a>
            
        </div>

        <!-- Footer -->
        <div class="footer">
            <div class="footText">
                <p><a href="https://www.cnic.es/en" target="_blank">Spanish National Center for Cardiovascular Research</a></p>
                <p>Cardiovascular Proteomics Laboratory</p>
                <p>C/ Melchor Fern√°ndez Almagro, 3. 28029 Madrid</p>
            </div>
        </div>

        <script>

            var jobID = '###INSERT_JOB_ID###';
            var jobStatus = '###INSER_JOB_STATUS###';
            var reloadTime = 5000
            
            document.getElementById("jobID").innerHTML = jobID;
            document.getElementById("jobStatus").innerHTML = jobStatus;
            
            //###INSERT_DISPLAY_containerDownload###

            setTimeout(function(){window.location.pathname='turboputative.html/'+jobID}, 1000)
            setTimeout(function(){location.reload()}, reloadTime)

        </script>

    </body>

</html>